<p-toast></p-toast>

<div class="auth-container">
  <div class="auth-card">
    
    <!-- Header -->
    <div class="auth-header">
      <div class="auth-logo">
        <img src="assets/images/LOGO.png" alt="Logo" class="logo-img">
      </div>
      <h1 class="auth-title">Mot de passe oublié ?</h1>
      <p class="auth-subtitle" *ngIf="!emailSent()">
        Saisissez votre email pour recevoir un lien de réinitialisation
      </p>
      <p class="auth-subtitle success-message" *ngIf="emailSent()">
        <i class="pi pi-check-circle"></i>
        Email envoyé avec succès !
      </p>
    </div>

    <!-- Formulaire -->
    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" *ngIf="!emailSent()">
      
      <!-- Email -->
      <div class="form-field">
        <label for="email" class="field-label">
          <i class="pi pi-envelope"></i>
          Adresse email
        </label>
        <div class="input-wrapper">
          <input 
            pInputText 
            id="email"
            type="email"
            formControlName="email"
            placeholder="votre.email@exemple.com"
            [class.input-error]="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
            class="auth-input"
          />
        </div>
        <small class="error-message" *ngIf="f['email'].errors?.['required'] && (f['email'].dirty || f['email'].touched)">
          <i class="pi pi-exclamation-circle"></i>
          L'email est requis
        </small>
        <small class="error-message" *ngIf="f['email'].errors?.['email'] && (f['email'].dirty || f['email'].touched)">
          <i class="pi pi-exclamation-circle"></i>
          Format d'email invalide
        </small>
      </div>

      <!-- Bouton d'envoi -->
      <button 
        pButton 
        type="submit"
        label="Envoyer le lien"
        icon="pi pi-send"
        [loading]="isLoading()"
        [disabled]="forgotPasswordForm.invalid || isLoading()"
        class="auth-button primary-button">
      </button>

    </form>

    <!-- Message de succès -->
    <div class="success-card" *ngIf="emailSent()">
      <div class="success-icon">
        <i class="pi pi-envelope"></i>
      </div>
      <h3 class="success-title">Vérifiez votre boîte email</h3>
      <p class="success-text">
        Un email contenant un lien de réinitialisation a été envoyé à votre adresse.
        Si vous ne le voyez pas, vérifiez vos spams.
      </p>
      <p class="success-hint">
        Le lien expire dans <strong>60 minutes</strong>.
      </p>
    </div>

    <!-- Retour connexion -->
    <div class="auth-footer">
      <button 
        pButton 
        type="button"
        label="Retour à la connexion"
        icon="pi pi-arrow-left"
        class="p-button-text p-button-secondary"
        (click)="backToLogin()">
      </button>
    </div>

  </div>
</div>